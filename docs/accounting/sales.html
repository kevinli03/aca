<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Revenue and Expenses – Kevin’s Accounting Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="mathjax-config.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Kevin’s Accounting Notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../accounting/accounting.html" aria-current="page"> 
<span class="menu-text">Accounting</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assurance/assurance.html"> 
<span class="menu-text">Assurance</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../business/business.html"> 
<span class="menu-text">Business</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../tax/tax.html"> 
<span class="menu-text">Tax</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../accounting/sales.html">Revenue and Expenses</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../accounting/accounting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accounting Basics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../accounting/sales.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Revenue and Expenses</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../accounting/asset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inventory and NCA</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../accounting/equity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Equity and Capital</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../accounting/system.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Systems and Errors</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sales" id="toc-sales" class="nav-link active" data-scroll-target="#sales"><strong>Sales</strong></a>
  <ul class="collapse">
  <li><a href="#returns" id="toc-returns" class="nav-link" data-scroll-target="#returns">Returns</a></li>
  <li><a href="#discounts" id="toc-discounts" class="nav-link" data-scroll-target="#discounts">Discounts</a></li>
  <li><a href="#output-vat" id="toc-output-vat" class="nav-link" data-scroll-target="#output-vat">Output VAT</a></li>
  <li><a href="#input-vat" id="toc-input-vat" class="nav-link" data-scroll-target="#input-vat">Input VAT</a></li>
  <li><a href="#deferred-income" id="toc-deferred-income" class="nav-link" data-scroll-target="#deferred-income">Deferred Income</a></li>
  <li><a href="#accrued-income" id="toc-accrued-income" class="nav-link" data-scroll-target="#accrued-income">Accrued Income</a></li>
  </ul></li>
  <li><a href="#expenses" id="toc-expenses" class="nav-link" data-scroll-target="#expenses"><strong>Expenses</strong></a>
  <ul class="collapse">
  <li><a href="#prepayments" id="toc-prepayments" class="nav-link" data-scroll-target="#prepayments">Prepayments</a></li>
  <li><a href="#accrued-expense" id="toc-accrued-expense" class="nav-link" data-scroll-target="#accrued-expense">Accrued Expense</a></li>
  <li><a href="#cost-of-sales" id="toc-cost-of-sales" class="nav-link" data-scroll-target="#cost-of-sales">Cost of Sales</a></li>
  <li><a href="#payroll-expense" id="toc-payroll-expense" class="nav-link" data-scroll-target="#payroll-expense">Payroll Expense</a></li>
  <li><a href="#margin-and-markup" id="toc-margin-and-markup" class="nav-link" data-scroll-target="#margin-and-markup">Margin and Markup</a></li>
  <li><a href="#irrecoverable-debt" id="toc-irrecoverable-debt" class="nav-link" data-scroll-target="#irrecoverable-debt">Irrecoverable Debt</a></li>
  <li><a href="#doubtful-debt" id="toc-doubtful-debt" class="nav-link" data-scroll-target="#doubtful-debt">Doubtful Debt</a></li>
  <li><a href="#provisions" id="toc-provisions" class="nav-link" data-scroll-target="#provisions">Provisions</a></li>
  <li><a href="#corporation-tax" id="toc-corporation-tax" class="nav-link" data-scroll-target="#corporation-tax">Corporation Tax</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Revenue and Expenses</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This page contains steps on how to prepare key account related to items on the income statement, such as revenue and expenses, and how their transactions are recorded. The content in this section is a part of the <strong>Accounting Fundamentals</strong> (certificate level) for the ACA qualification.</p>
<ul>
<li>Note: for depreciation and disposals, see <a href="../accounting/asset.html">Inventory and NCA</a>.</li>
</ul>
<p><br></p>
<hr>
<section id="sales" class="level1">
<h1><strong>Sales</strong></h1>
<section id="returns" class="level3">
<h3 class="anchored" data-anchor-id="returns">Returns</h3>
<p>During business, returns will occur. The accounting of returns is simple - we just reverse the original transaction.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Customer Returns</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">You Return to Supplier</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) Original Customer Purchase</td>
<td><p>Dr Cash/Receivables</p>
<p>Cr Revenue</p></td>
</tr>
<tr class="even">
<td>2) Customer Returns: we reverse the original transaction.</td>
<td><p>Dr Revenue</p>
<p>Cr Cash/Receivables</p></td>
</tr>
</tbody>
</table>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) Your Original Purchase</td>
<td><p>Dr Purchases</p>
<p>Cr Cash/Payables</p></td>
</tr>
<tr class="even">
<td>2) Your Return to Supplier: we reverse the original transaction.</td>
<td><p>Dr Cash/Payables</p>
<p>Cr Purchases</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="discounts" class="level3">
<h3 class="anchored" data-anchor-id="discounts">Discounts</h3>
<p>Discounts at the time of sale (like bulk-order discounts) are just recorded as normal transactions at their discounted price.</p>
<p>However, some discounts take effect later, especially with credit sales and prompt payment. For example, you might offer a customer a 5% discount if they pay within a week. You will have some expectation of whether or not the customer/or you will take the discount.</p>
<p>At the moment of transaction, record the sale/purchase with the <strong>expected price</strong>. Then, if the <strong>actual price</strong> later with/without the discount is different than expected, you will need to adjust.</p>
<ul>
<li>If the expected price and actual price are the same, no adjustment is needed.</li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Discount to Customer</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">My Discount from Supplier</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) Initially record credit sale with expected price</td>
<td><p>Dr Receivables: Expected Price</p>
<p>Cr Revenue: Expected Price</p></td>
</tr>
<tr class="even">
<td>2) Record adjustment after actual price</td>
<td><p>Cr Receivables: Expected Price</p>
<p>Dr Cash: Actual Amount Customer Paid</p>
<p>Dr/Cr Revenue: The balancing figure to make Dr=Cr</p></td>
</tr>
</tbody>
</table>
<p>Basically: initially, record expected price. Once paid, clear receivables account, record cash inflow, and balance with Dr/Cr in revenue.</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) Initially record credit purchase with expected price</td>
<td><p>Dr Purchases: Expected Price</p>
<p>Cr Payables: Expected Price</p></td>
</tr>
<tr class="even">
<td>2) Record adjustment after actual price</td>
<td><p>Dr Payables: Expected Price</p>
<p>Cr Cash: Actual Price</p>
<p>Dr/Cr Purchases: The balancing figure to make Dr=Cr</p></td>
</tr>
</tbody>
</table>
<p>Basically: initially, record expected price. Once paid, clear payables account, record cash outflow, and balance with Dr/Cr in revenue.</p>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="output-vat" class="level3">
<h3 class="anchored" data-anchor-id="output-vat">Output VAT</h3>
<p>When we sell a product to customers, they will pay us:</p>
<ol type="1">
<li>The price of the product we are selling (exclusive of VAT price)</li>
<li>The VAT (sales tax) of the product. This will need to be paid to HMRC.</li>
</ol>
<p>We first need to figure out the price of the product (exclusive of VAT), and the VAT amount. Then, we can do the following transactions:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) Sale Price to record for Revenue</td>
<td><p>Dr Cash/Receivables: Exclusive of VAT Price</p>
<p>Cr Revenue: Exclusive of VAT Price</p></td>
</tr>
<tr class="even">
<td>2) Record VAT and have to pay to HMRC</td>
<td><p>Dr Cash/Receivables: VAT Amount</p>
<p>Cr VAT Payable (Liability): VAT Amount</p></td>
</tr>
</tbody>
</table>
<p>We can also combine the two into one transaction by combining the Dr Cash/Receivables entry:</p>
<ul>
<li>Dr Cash/Receivables: inclusive of VAT Price.</li>
<li>Cr Revenue: Exclusive of VAT Price.</li>
<li>Cr VAT Payable: VAT amount.</li>
</ul>
<p>Note: VAT is not an expense. We are simply acting as tax collectors for HMRC, so we never “gain control” of VAT, so we are not expensing it either.</p>
<p><br></p>
</section>
<section id="input-vat" class="level3">
<h3 class="anchored" data-anchor-id="input-vat">Input VAT</h3>
<p>When we buy things from suppliers, we are paying for both the inventory, and the VAT of that inventory.</p>
<p>As a business (that is VAT registered with HMRC), we can reclaim this input VAT. This is money HMRC owe to us (but is still included in VAT payables liability account, but as a negative liability).</p>
<p>We first need to figure out the price of the product (exclusive of VAT), and the VAT amount. Then, we can do the following transactions:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) Purchase Price to record for purchases</td>
<td><p>Dr Purchases: Exclusive of VAT Price</p>
<p>Cr Cash/Payables: Exclusive of VAT Price</p></td>
</tr>
<tr class="even">
<td>2) Record Input VAT that HMRC owes to us</td>
<td><p>Dr VAT Payables: VAT Amount</p>
<p>Cr Cash/Payables: VAT Amount</p></td>
</tr>
</tbody>
</table>
<p>We can also combine the two into one transaction by combining the Dr Cash/Receivables entry:</p>
<ul>
<li>Cr Cash/Receivables: inclusive of VAT Price.</li>
<li>Dr Purchases: Exclusive of VAT Price.</li>
<li>Dr VAT Payable: VAT amount.</li>
</ul>
<p><br></p>
</section>
<section id="deferred-income" class="level3">
<h3 class="anchored" data-anchor-id="deferred-income">Deferred Income</h3>
<p>We are selling a good/service. Let say we will provide the good/service in Year 2, but we require customers <strong>prepay</strong> in Year 1.</p>
<p>In accrual accounting, revenue is recognised when the <strong>goods/services are in the control of the customer</strong>. Thus, if we recorded this transaction as revenue in Year 1, we actually need to adjust our accounts so that the revenue occurs in Year 2.</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) <strong>Year 1</strong>: the customer prepays. We record the following:</td>
<td><p>Cr Revenue X</p>
<p>Dr Cash X</p></td>
</tr>
<tr class="even">
<td>2) <strong>End of Year 1</strong>: we realise goods/services are for Year 2. Thus, we need to take it out of Year 1’s revenue.</td>
<td><p>Dr Revenue X</p>
<p>Cr Deferred Income (Liability) X</p></td>
</tr>
<tr class="odd">
<td>3) <strong>Beginning of Year 2</strong>: we now credit the revenue to Year 2.</td>
<td><p>Cr Revenue X</p>
<p>Dr Deferred Income (Liability) X</p></td>
</tr>
</tbody>
</table>
<p>Note: you can do partial adjustments. For example, if a customer prepays in Year 1 for 3 months of service in Year 1 and 4 months of service for Year 2, only the 4 months in Year 2 are deferred income.</p>
<p>Tip: Year-end balance of deferred income is <strong>next year’s</strong> income.</p>
<p><br></p>
</section>
<section id="accrued-income" class="level3">
<h3 class="anchored" data-anchor-id="accrued-income">Accrued Income</h3>
<p>We are selling a good/service. Let say we will provide the good/service in Year 1, but we require customers <strong>pay later (arrears)</strong> in Year 2.</p>
<p>In accrual accounting, revenue is recognised when the <strong>goods/services are in the control of the customer</strong>. Thus, we need to record this revenue in Year 1, even if no payment has occured</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) <strong>End of Year 1</strong>: no payment has occurred, but we need to add revenue to Year 1.</td>
<td><p>Cr Revenue X</p>
<p>Dr Accrued Income (Asset) X</p></td>
</tr>
<tr class="even">
<td>2) <strong>Beginning of Year 2</strong>: clear the accrued income balance.</td>
<td><p>Cr Accrued Income (Asset) X</p>
<p>Dr Revenue X</p></td>
</tr>
<tr class="odd">
<td>3) <strong>Year 2</strong>: the customer pays. We record this normally, so the Cr Revenue X cancels out step 2’s Dr Revenue X.</td>
<td><p>Cr Revenue X</p>
<p>Dr Cash X</p></td>
</tr>
</tbody>
</table>
<p>Note: you can do partial adjustments. For example, if a customer pays after in Year 2 for 3 months of service in Year 1 and 4 months of service for Year 1, only the 3 months in Year 1 are accrued income.</p>
<p>Tip: year end balance of accrued income is <strong>this year’s</strong> income.</p>
<p><br></p>
<p><br></p>
<hr>
</section>
</section>
<section id="expenses" class="level1">
<h1><strong>Expenses</strong></h1>
<section id="prepayments" class="level3">
<h3 class="anchored" data-anchor-id="prepayments">Prepayments</h3>
<p>We are buying a good/service (ex. utilities). Let say we will get the good/service in Year 2, but we <strong>prepay</strong> in Year 1.</p>
<p>The matching principle says we should match expenses to the revenue they generated. We used this good/service provided in Year 2 to generate revenues in Year 2. Thus, if we recorded this transaction as an expense in Year 1, we actually need to adjust our accounts so that the expense occurs in Year 2.</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) <strong>Year 1</strong>: We prepay. We record the following at the time of payment:</td>
<td><p>Dr Expense X</p>
<p>Cr Cash X</p></td>
</tr>
<tr class="even">
<td>2) <strong>End of Year 1</strong>: we realise expense should be for Year 2. Thus, we need to take it out of Year 1’s expenses.</td>
<td><p>Cr Expense X</p>
<p>Dr Prepayments (Asset) X</p></td>
</tr>
<tr class="odd">
<td>3) <strong>Beginning of Year 2</strong>: we now credit the expense to Year 2.</td>
<td><p>Dr Expense X</p>
<p>Cr Prepayments (Asset) X</p></td>
</tr>
</tbody>
</table>
<p>Note: you can do partial adjustments. For example, if we prepay in Year 1 for 3 months of service in Year 1 and 4 months of service for Year 2, only the 4 months in Year 2 are prepaid.</p>
<p><br></p>
</section>
<section id="accrued-expense" class="level3">
<h3 class="anchored" data-anchor-id="accrued-expense">Accrued Expense</h3>
<p>We are buying a good/service. Let say we will get the good/service in Year 1, but we <strong>pay later</strong> in Year 2.</p>
<p>The matching principle says we should match expenses to the revenue they generated. We used this good/service provided in Year 1 to generate revenues in Year 1.&nbsp;Thus, we need to record this expense in Year 1, even if no payment has occurred.</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) <strong>End of Year 1</strong>: no payment has occurred, but we need to add expense to Year 1.</td>
<td><p>Dr Expense X</p>
<p>Cr Accrued Expenses (Liability) X</p></td>
</tr>
<tr class="even">
<td>2) <strong>Beginning of Year 2</strong>: clear the accrued expenses balance.</td>
<td><p>Dr Accrued Expenses (Liability) X</p>
<p>Cr Expense X</p></td>
</tr>
<tr class="odd">
<td>3) <strong>Year 2</strong>: we pay. We record this normally, so the Dr Expense X cancels out step 2’s Cr Expense X.</td>
<td><p>Dr Expense X</p>
<p>Cr Cash X</p></td>
</tr>
</tbody>
</table>
<p>Note: you can do partial adjustments. For example, if we pay after in Year 2 for 3 months of service in Year 1 and 4 months of service for Year 1, only the 3 months in Year 1 are accrued expenses.</p>
<p><br></p>
</section>
<section id="cost-of-sales" class="level3">
<h3 class="anchored" data-anchor-id="cost-of-sales">Cost of Sales</h3>
<p>The cost of sales is the cost of the inventory (goods sold) that generated the revenue/sales of that period.</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><p>Opening Inventory</p>
<p>Purchases (net, if returns exist)</p>
<p>Inward Delivery Costs</p>
<p>(less) Closing Inventory</p></td>
<td><p>£X</p>
<p>£X</p>
<p>£X</p>
<p>(£X)</p></td>
</tr>
<tr class="even">
<td><strong>Cost of Sales</strong></td>
<td><strong>£X</strong></td>
</tr>
</tbody>
</table>
<p>There are two types of delivery expenses that might be incurred, which have to be recorded differently.</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Delivery Inwards</th>
<th>Delivery Outwards</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Delivery costs and expenses to deliver products <u>from suppliers to your inventory.</u></td>
<td>Delivery costs and expenses to deliver products from <u>your inventory to customers</u>.</td>
</tr>
<tr class="even">
<td>This will be included/added as an expense within the <strong>cost of sales</strong>.</td>
<td>This is a separate expense in the <strong>operating/administration expenses</strong>.</td>
</tr>
</tbody>
</table>
<p><br></p>
</section>
<section id="payroll-expense" class="level3">
<h3 class="anchored" data-anchor-id="payroll-expense">Payroll Expense</h3>
<p>When a firm pays its employees, it has to pay 3 things:</p>
<ol type="1">
<li>Employee’s income tax to the tax collector (HRMC in the UK).</li>
<li>Employee’s national insurance contribution (and the employer’s additional contribution) to the tax collector.</li>
<li>Employee the remaining net salary.</li>
</ol>
<p>The net income to the employee is paid immediately (such as at the end of the month), but the tax and national insurance is usually withheld until tax filling season.</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 30%">
<col style="width: 40%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Dr Wages (Expense)</strong></td>
<td>gross wages + employer national insurance</td>
<td>This expense covers net salary, income tax, and employee <u>+ employer national insurance contribution</u>.</td>
</tr>
<tr class="even">
<td><strong>Cr Cash (Asset)</strong></td>
<td>net wages</td>
<td>The cash of net income that is paid out to the employee.</td>
</tr>
<tr class="odd">
<td><strong>Cr Tax Payable (Liability)</strong></td>
<td>income tax + employee and employer national insurance</td>
<td>Taxes are paid at the end of the year, so there is a liability for income tax and national insurance.</td>
</tr>
</tbody>
</table>
<p>When the tax is later paid to the tax authority (HMRC), the liability is reduced (debited) and cash is decreased (credited).</p>
<p><br></p>
</section>
<section id="margin-and-markup" class="level3">
<h3 class="anchored" data-anchor-id="margin-and-markup">Margin and Markup</h3>
<p>Margin and markup are two relationships between the sales, cost of sales, and gross profit. They often inform companies and investors about the profitability of a firm.</p>
<p><strong>Margin</strong> is the ratio of the gross profit to sales (revenue):</p>
<p><span class="math display">\[
\text{margin} = \frac{\text{gross profit}}{\text{revenue}}
\]</span></p>
<p><strong>Markup</strong> is defined as the ratio of the gross profit to sales, and can also be determined by a ratio of sales to cost of sales:</p>
<p><span class="math display">\[
\text{markup} = \frac{\text{gross profit}}{\text{cost of sales}} \quad \text{or} \quad 1 + \text{markup} = \frac{\text{sales}}{\text{cost of sales}}
\]</span></p>
<p><br></p>
</section>
<section id="irrecoverable-debt" class="level3">
<h3 class="anchored" data-anchor-id="irrecoverable-debt">Irrecoverable Debt</h3>
<p>When a firm makes a credit sale, they will increase their receivables balance. This is a debt that the customer owes to the firm.</p>
<p>Sometimes, the firm will believe the customer will never pay (ex. bankrupt, fled the country). This is now an irrecoverable debt that needs to be removed from receivables since it is no longer expected to be received.</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) Original credit sale</td>
<td><p>Cr Revenue X</p>
<p>Dr Receivables X</p></td>
</tr>
<tr class="even">
<td>2) Irrecoverable debt adjustment: get rid of debt from receivables.</td>
<td><p>Dr Irrecoverable Debt Expense (IDE) X</p>
<p>Cr Receivables X</p></td>
</tr>
</tbody>
</table>
<p>Irrecovarable Debt Expense (IDE) is an administrative/operating expense for the income statement.</p>
<p>It is also possible that after writing off a debt, somehow, it is still payed by the customer. The following entry would be required:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>3) Irrecoverable debt recovered: clear IDE account</td>
<td><p>Dr Cash X</p>
<p>Cr Irrecovrerable Debt Expense (IDE) X</p></td>
</tr>
</tbody>
</table>
<p><br></p>
</section>
<section id="doubtful-debt" class="level3">
<h3 class="anchored" data-anchor-id="doubtful-debt">Doubtful Debt</h3>
<p>In accounting, we are prudent/conservative. Thus, if there is a possibility a debt will not be paid, we need to show this in financial statements.</p>
<p>At the <strong>end of the year</strong>, an allowance for doubtful debt is set up. This is basically an amount that we believe will have a chance of not being paid.</p>
<ul>
<li>Allowance is often calculated as a percentage (ex. 50% chance £1,000 will not be paid, so £500 allowance). However, this amount usually given in questions.</li>
</ul>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) Original credit sale</td>
<td><p>Cr Revenue X</p>
<p>Dr Receivables X</p></td>
</tr>
<tr class="even">
<td>2) Set up allowance</td>
<td><p>Cr Allowance for Receivables (Liability) X</p>
<p>Dr Irrecoverable Debt Expense (IDE) X</p></td>
</tr>
</tbody>
</table>
<p>The allowance for receivables is a <strong>liability</strong> (negative asset) that reduces the value of the Receivables. Thus, gross receivables minus allowance equals net receivables.</p>
<p><strong>Allowance is set at the end of the year</strong>. Note that allowances are often determined at a certain value, so the double entry <strong>should not be the value of the allowance</strong>, but the <strong>amount change</strong> to go from the old allowance value to the new allowance value.</p>
<ul>
<li>Ex. if last year’s allowance is £500, and this year’s is £800, we should only Cr Allowance £300 (the change).</li>
</ul>
<p><br></p>
</section>
<section id="provisions" class="level3">
<h3 class="anchored" data-anchor-id="provisions">Provisions</h3>
<p><br></p>
</section>
<section id="corporation-tax" class="level3">
<h3 class="anchored" data-anchor-id="corporation-tax">Corporation Tax</h3>
<p>Only incorporated companies pay corporation tax. Sole traders and partners simply pay income tax on their profits.</p>
<p>The corporate tax cycle is as follows for tax incurred on profits in Year 1:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>1) <strong>End of Year 1</strong>: Corporate tax is estimated. A liability for the estimated tax is created.</td>
<td><p>Dr Tax Expense: Estimated Amount</p>
<p>Cr Tax Payable (Liability): Estimated Amount</p></td>
</tr>
<tr class="even">
<td>2) <strong>Year 2</strong>: tax return is submitted by company. The <strong>actual tax amount</strong> may be different than the estimated amount.</td>
<td></td>
</tr>
<tr class="odd">
<td>3) <strong>Year 2:</strong> you pay the actual amount to HMRC</td>
<td><p>Cr Cash: Actual Amount</p>
<p>Dr Tax Payable: Actual Amount</p></td>
</tr>
<tr class="even">
<td>4) <strong>Year 2:</strong> If the estimated and actual tax amount are different, there will be a remaining balance on the payable account. Clear the balance and assign it to this year 2’s tax expense.</td>
<td><p>Dr/Cr Tax Payable: Leftover Amount</p>
<p>Cr/Dr Tax Expense: Leftover Amount</p></td>
</tr>
</tbody>
</table>
<ul>
<li>An <strong>underprovision</strong> is when the estimated tax amount is lower than the actual tax amount. A Dr balance will be left of the payable account after paying.</li>
<li>An <strong>overprovision</strong> is when the estimated tax amount is higher than the actual tax amount. A Cr balance will be left on the payable account after paying.</li>
</ul>
<p>Tip: At the end of any period:</p>
<ul>
<li>Tax Payable balance is always the <strong>estimated tax for that year</strong>.</li>
<li>Tax expense balance is the estimated tax for that year <strong>+/- leftover amount</strong> from underprovision/overprovision.</li>
</ul>
<p><br></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">




</body></html>