<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Preparing Statements – Kevin’s Accounting Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Kevin’s Accounting Notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../accounting/accounting.html" aria-current="page"> 
<span class="menu-text">Accounting</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assurance/assurance.html"> 
<span class="menu-text">Assurance</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../business/business.html"> 
<span class="menu-text">Business</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../tax/tax.html"> 
<span class="menu-text">Tax</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../accounting/prepare.html">Preparing Statements</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../accounting/accounting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accounting Basics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../accounting/prepare.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Preparing Statements</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../accounting/adjust.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Adjustments</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#bookkeeping" id="toc-bookkeeping" class="nav-link active" data-scroll-target="#bookkeeping"><strong>Bookkeeping</strong></a>
  <ul class="collapse">
  <li><a href="#recording-transactions" id="toc-recording-transactions" class="nav-link" data-scroll-target="#recording-transactions">Recording Transactions</a></li>
  <li><a href="#inventory-and-cost-of-sales" id="toc-inventory-and-cost-of-sales" class="nav-link" data-scroll-target="#inventory-and-cost-of-sales">Inventory and Cost of Sales</a></li>
  <li><a href="#advanced-transactions" id="toc-advanced-transactions" class="nav-link" data-scroll-target="#advanced-transactions">Advanced Transactions</a></li>
  <li><a href="#closing-the-accounts" id="toc-closing-the-accounts" class="nav-link" data-scroll-target="#closing-the-accounts">Closing the Accounts</a></li>
  <li><a href="#trial-balance" id="toc-trial-balance" class="nav-link" data-scroll-target="#trial-balance">Trial Balance</a></li>
  </ul></li>
  <li><a href="#compiling-statements" id="toc-compiling-statements" class="nav-link" data-scroll-target="#compiling-statements"><strong>Compiling Statements</strong></a>
  <ul class="collapse">
  <li><a href="#income-statement" id="toc-income-statement" class="nav-link" data-scroll-target="#income-statement">Income Statement</a></li>
  <li><a href="#balance-sheet" id="toc-balance-sheet" class="nav-link" data-scroll-target="#balance-sheet">Balance Sheet</a></li>
  <li><a href="#statement-of-changes-in-equity" id="toc-statement-of-changes-in-equity" class="nav-link" data-scroll-target="#statement-of-changes-in-equity">Statement of Changes in Equity</a></li>
  <li><a href="#cash-flow" id="toc-cash-flow" class="nav-link" data-scroll-target="#cash-flow">Cash Flow</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Preparing Statements</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This page contains basic steps on how to prepare the core financial statements for sole-companies (not groups). The content in this section is a part of the <strong>Accounting Fundamentals</strong> (certificate level) for the ACA qualification.</p>
<p><br></p>
<hr>
<section id="bookkeeping" class="level1">
<h1><strong>Bookkeeping</strong></h1>
<section id="recording-transactions" class="level3">
<h3 class="anchored" data-anchor-id="recording-transactions">Recording Transactions</h3>
<p>For each transaction, we should <mark>list the debits and credits, and ensure they are equal</mark>. Then, we put each debit/credit entry into their respective accounts (like cash, inventory, etc.). These respective accounts are called T-accounts/ledger accounts. This process is called <strong>double entry accounting</strong>.</p>
<p>For example, imagine I invest £5,000 into the firm’s bank account. In double entry accounting, we know the debits and credits are:</p>
<ul>
<li>Dr.&nbsp;Cash (Asset) £5,000</li>
<li>Cr. Equity (Equity) £5,000</li>
</ul>
<p>Then, list the debits and credits in the correct accounts:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: center;"><p><strong>Equity</strong></p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Debits</th>
<th style="text-align: center;">Credits</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">£0</td>
<td style="text-align: center;">£5,000</td>
</tr>
</tbody>
</table></td>
<td style="text-align: center;"><p><strong>Cash (Asset)</strong></p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Debits</th>
<th style="text-align: center;">Credits</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">£5,000</td>
<td style="text-align: center;">£0</td>
</tr>
</tbody>
</table></td>
</tr>
</tbody>
</table>
<p>Each transaction’s debits and credits should balance. However, each t-account individually does not need to be balanced.</p>
<ul>
<li>Note: for <mark>income statement accounts (revenue, purchases, expenses), the starting balance of all accounts at the beggining of the period should be reset to 0</mark>.</li>
<li>For <mark>all other accounts (on the balance sheet), the starting balance of debits/credits should be carried over</mark> from the previous period.</li>
</ul>
<p>Note: do not record transactions to inventory. See below.</p>
<p><br></p>
</section>
<section id="inventory-and-cost-of-sales" class="level3">
<h3 class="anchored" data-anchor-id="inventory-and-cost-of-sales">Inventory and Cost of Sales</h3>
<p>When dealing with inventory, we <mark>do not update the inventory account</mark>. For a transaction that increases inventory, we instead use the purchases account.</p>
<ul>
<li><strong>Dr Purchases</strong> £–</li>
<li><strong>Cr Cash/Payables</strong> £–</li>
</ul>
<p>However, at the end of the year, we need to know the closing inventory balance. Closing inventory consists of:</p>
<ul>
<li>Goods which have been purchased, bur not yet sold.</li>
<li>Goods which are not part of ‘cost of goods sold’ (see adjustments and accrual accounting).</li>
<li>An asset of the business, or held for resale and are classified as a current asset.</li>
</ul>
<p>At the close of the period, we will complete this transaction:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 70%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Dr Closing Inventory (Asset)</strong></td>
<td><p>This is an asset on the balance sheet, and will be the value of the inventory listed.</p>
<p>This figure will also become the opening inventory of the next period.</p></td>
</tr>
<tr class="even">
<td><strong>Cr Closing Inventory (Expense)</strong></td>
<td>This is a (negative) expense account on the income statement. It will be used alongside purchases and the previous period’s closing inventory to calculate cost of sales.</td>
</tr>
</tbody>
</table>
<p>To calculate the <strong>cost of sales</strong> debit value, we do the following calculation:</p>
<blockquote class="blockquote">
<p><strong>Cost of sales debit = opening inventory + purchases + delivery inwards - closing inventory</strong></p>
</blockquote>
<ul>
<li>See advanced transactions for delivery inwards. It is not all delivery expenses.</li>
</ul>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Inventory and Service Organisations
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Some service based industries will have very few physical inventory. For example, netflix or financial services have very few inventory.</p>
<p>Instead, cost of sales will <strong>reflect the cost of providing the service to customers</strong>. This includes:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 70%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Direct Labour Costs</strong></td>
<td><ul>
<li>If you are offering a tax specialist to a company, their salary would be included in cost of sales.</li>
<li>If you are a pool cleaning company, then the pool cleaner should be included in the cost of sales.</li>
<li>See note below.</li>
</ul></td>
</tr>
<tr class="even">
<td><strong>Materials Used</strong></td>
<td><ul>
<li>If you are offering a pool cleaning company, then the pool cleaning chemicals would be included in the cost of sales.</li>
<li>Note the difference between expenses (recurring) and one-time purchases of non-current assets (like equipment).</li>
</ul></td>
</tr>
<tr class="odd">
<td><strong>Sales Commission</strong></td>
<td><ul>
<li>The commission or bonus earned by salespeople, specifically as a result of securing work from customers.</li>
</ul></td>
</tr>
</tbody>
</table>
<p>NOTE: costs incurred that are not directly related to the service are not included. For example, receptionists and their salary, the sales-persons team and their salary.</p>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="advanced-transactions" class="level3">
<h3 class="anchored" data-anchor-id="advanced-transactions">Advanced Transactions</h3>
<p>Some more complex transactions and their record in t-accounts include returns, discounts, delivery costs, and payroll.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Returns</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Discounts</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Payroll</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Delivery</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>The recording of sales (selling to a consumer) and purchases (buying from a supplier) are typically done as:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sales</strong> (selling to customer)</td>
<td><strong>Purchases</strong> (buying from supplier)</td>
</tr>
<tr class="even">
<td><p>Dr Cash/Expenses (increase)</p>
<p>Cr Revenue (increase)</p></td>
<td><p>Dr Purchases (increase)</p>
<p>Cr Cash (decrease) / Cr Payables (increase)</p></td>
</tr>
</tbody>
</table>
<p>However, sometimes, the consumer (or us) will want to return a good. For returns, we simply “undo” the transaction with the reverse record:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sales</strong> (selling to customer)</td>
<td><strong>Purchases</strong> (buying from supplier)</td>
</tr>
<tr class="even">
<td><p>Dr Revenue (decrease)</p>
<p>Cr Cash (decrease)</p></td>
<td><p>Dr Cash (increase) / Dr Payables (decrease)</p>
<p>Cr Purchases (decrease)</p></td>
</tr>
</tbody>
</table>
<p>Sometimes, some companies will have a separate expense account for returns (so instead of Dr Revenue, they would Dr Returns).</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>For discounts, we <strong>initially</strong> record what you expect to receive/pay (including likely discounts). However, you may need to go back and adjust this. This is because of <strong>early settlement</strong> discounts: a discount for paying early after you have received the good.</p>
<ul>
<li>Ex. I buy materials on credit for 6100. The supplier offers a £5 discount if you pay within 10 days. If I do pay off within 10 days and get the discount, this may require adjustment in the books.</li>
<li>Note: if your expectation of discount is actually come true, then no adjustment is needed.</li>
</ul>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 40%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Initially</th>
<th>Once Paid</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Sales</strong></p>
<p>(selling to customer)</p></td>
<td><p>Dr Receivables (expected price)</p>
<p>Cr Revenue (expected price)</p></td>
<td><p>Cr Recievables (expected price)</p>
<p>Dr Cash (actual paid price)</p>
<p>Cr/Dr Revenue (different to balance dr/cr)</p></td>
</tr>
<tr class="even">
<td><p><strong>Purchases</strong></p>
<p>(buying from supplier)</p></td>
<td><p>Cr Payables (expected price)</p>
<p>Dr Purchases (expected price)</p></td>
<td><p>Dr Payables (expected price)</p>
<p>Cr Cash (actual paid price)</p>
<p>Cr/Dr Purchases (difference to balance dr/cr)</p></td>
</tr>
</tbody>
</table>
<p>The same applies to initially expecting a discount but failing to get it. In some standards (UK GAAP), instead of Cr/Dr purchases, we Cr/Dr a separate account - discounts, to make the adjustment.</p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>When a firm pays its employees, it has to pay 3 things:</p>
<ol type="1">
<li>Pay the employee’s income tax to the tax collector (HRMC in the UK).</li>
<li>Pay the employee’s national insurance contribution (and the employer’s additional contribution) to the tax collector.</li>
<li>Pay the employee the remaining net salary.</li>
</ol>
<p>The net income to the employee is paid immediately (such as at the end of the month), but the tax and national insurance is usually withheld until tax filling season.</p>
<p>The transaction would be as follows:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 30%">
<col style="width: 40%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Dr Wages (Expense)</strong></td>
<td>gross wages + employer national insurance</td>
<td>This expense covers net salary, income tax, and employee <u>+ employer national insurance contribution</u>.</td>
</tr>
<tr class="even">
<td><strong>Cr Cash (Asset)</strong></td>
<td>net wages</td>
<td>The cash of net income that is paid out to the employee.</td>
</tr>
<tr class="odd">
<td><strong>Cr Tax Payable (Liability)</strong></td>
<td>income tax + employee and employer national insurance</td>
<td>Taxes are paid at the end of the year, so there is a liability for income tax and national insurance.</td>
</tr>
</tbody>
</table>
<p>When the tax is later paid to the tax authority (HMRC), the liability is reduced (debited) and cash is decreased (credited).</p>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p>There are two types of delivery expenses that might be incurred, which have to be recorded differently.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Delivery Inwards</th>
<th>Delivery Outwards</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Delivery costs and expenses to deliver products <u>from suppliers to your inventory.</u></td>
<td>Delivery costs and expenses to deliver products from <u>your inventory to customers</u>.</td>
</tr>
<tr class="even">
<td>This will be included/added as an expense within the <strong>cost of sales</strong>.</td>
<td>This is a separate expense in the <strong>operating expenses</strong>.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="closing-the-accounts" class="level3">
<h3 class="anchored" data-anchor-id="closing-the-accounts">Closing the Accounts</h3>
<p>At the end of the year, we need to <strong>close the accounts</strong> (except inventory and cost of sales, see above). The steps are as follows:</p>
<ol type="1">
<li>Sum up each side of debits and credits. Find the side (debit or credit) with the higher sum value. Put this at the bottom of both sides:</li>
</ol>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Debits</th>
<th style="text-align: center;">Credits</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">£1000</td>
<td style="text-align: center;">£600</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>highest: £1000</strong></td>
<td style="text-align: center;"><strong>highest: £1000</strong></td>
</tr>
</tbody>
</table>
<ol start="2" type="1">
<li>Look at the side with the lower value. <mark>Find the “difference” between the lower and higher values, and put it on the side of the lower side</mark>. This difference is called the <strong>balance carried forward (c/f)</strong>. Write it on the smaller side.</li>
</ol>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Debits</th>
<th style="text-align: center;">Credits</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">£1000</td>
<td style="text-align: center;">£600</td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>-</p>
<p><strong>highest: £1000</strong></p></td>
<td style="text-align: center;"><p><strong>balance c/f £400</strong></p>
<p><strong>highest: £1000</strong></p></td>
</tr>
</tbody>
</table>
<ol start="3" type="1">
<li>On the side with the larger value, copy the balance c/f value to that side on the very bottom, called the <strong>balance brought forward (b/f)</strong>.</li>
</ol>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Debits</th>
<th style="text-align: center;">Credits</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">£1000</td>
<td style="text-align: center;">£600</td>
</tr>
<tr class="even">
<td style="text-align: center;"><p>-</p>
<p><strong>highest: £1000</strong></p>
<p><u><strong>balance b/f £400</strong></u></p></td>
<td style="text-align: center;"><p><strong>c/f £400</strong></p>
<p><strong>highest: £1000</strong></p></td>
</tr>
</tbody>
</table>
<ol start="4" type="1">
<li>The <mark>balance b/f is the final balance of the account</mark>. This final balance (note if it is a debit or credit) will go into the trial balance.
<ul>
<li>For income statement accounts (revenue, purchases, expenses), the starting balance will be <mark>reset to 0</mark> for the next year.</li>
<li>For balance sheet accounts (all not on the income statement), the balance b/f will be <mark>starting balance</mark> for next year’s accounts.</li>
</ul></li>
</ol>
<p><br></p>
</section>
<section id="trial-balance" class="level3">
<h3 class="anchored" data-anchor-id="trial-balance">Trial Balance</h3>
<p>A trial balance is simply a list of all accounts, and their closing balances. It takes the form of the following:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Dr £</th>
<th>Cr £</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Cash</td>
<td>3,000</td>
<td></td>
</tr>
<tr class="even">
<td>Revenue</td>
<td></td>
<td>4,000</td>
</tr>
<tr class="odd">
<td>Rent Expense</td>
<td>3,000</td>
<td></td>
</tr>
<tr class="even">
<td>Capital</td>
<td></td>
<td>2,000</td>
</tr>
<tr class="odd">
<td><u><strong>TOTAL</strong></u></td>
<td><u><strong>£6,000</strong></u></td>
<td><u><strong>£6,000</strong></u></td>
</tr>
</tbody>
</table>
<p>The trial balance should <strong>balance</strong>: <mark>the total number of debits and credits should be equal</mark>.</p>
<ul>
<li>Make sure you put the value of the account into the correct column (debit or credit).</li>
<li>A quick way to check if the column is correct, is that revenue should always be in the debit column (you cannot have negative revenue, and debit increases revenue), and expenses/drawings should always be in the credit column.</li>
</ul>
<p>This trial balance will help us create both the income statement, and the balance sheet.</p>
<p><strong>NOTE: before you continue on to compiling statements, you will need to check if there are <a href="../accounting/adjust.html">adjustments</a> to be made</strong>. Adjustments are to correct for accrual accounting procedures, and include accrued payments/prepayments.</p>
<p><br></p>
<p><br></p>
<hr>
</section>
</section>
<section id="compiling-statements" class="level1">
<h1><strong>Compiling Statements</strong></h1>
<section id="income-statement" class="level3">
<h3 class="anchored" data-anchor-id="income-statement">Income Statement</h3>
<p>To create the income statement from the trial balance, we just simply put the closing balances of the relevant accounts into the following form:</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Dr £</th>
<th>Cr £</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Revenue</td>
<td></td>
<td>£–</td>
</tr>
<tr class="even">
<td><p>Cost of Sales</p>
<p><strong>Gross Profit</strong></p></td>
<td>£–</td>
<td></td>
</tr>
<tr class="odd">
<td><p>Rent Expense</p>
<p>Salary</p>
<p>Other Operating Expense</p>
<p><strong>Operating Profit</strong></p></td>
<td><p>£–</p>
<p>£–</p>
<p>£–</p></td>
<td></td>
</tr>
<tr class="even">
<td><p>Finance Expense</p>
<p><strong>Profit Before Tax</strong></p></td>
<td>£–</td>
<td></td>
</tr>
<tr class="odd">
<td><p>Tax Expense</p>
<p><strong>Net Profit</strong></p></td>
<td>£–</td>
<td></td>
</tr>
</tbody>
</table>
<p>The <strong>bolded</strong> parts are not accounts, and should be left blank until all accounts are filled in. Then, to calculate the bolded metrics, sum up all the credits, and all the debits, <u>above</u> the bolded metric (all the way to the top). Then do the sum of credits minus the sum of debits.</p>
<p><br></p>
</section>
<section id="balance-sheet" class="level3">
<h3 class="anchored" data-anchor-id="balance-sheet">Balance Sheet</h3>
<p>To compile the balance sheet, simply list the remaining non-income statement accounts into their proper location. Remember that for assets, debit is positive and credit is negative. For liabilities and equity, debit is negative and credit is positive.</p>
<table class="table-bordered table-sm small caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><p>Non-Current Assets</p>
<ul>
<li>Accounts go here</li>
</ul>
<p>Current Assets</p>
<ul>
<li>Accounts go here</li>
</ul>
<p><strong>Total Assets</strong></p></td>
<td><p>-</p>
<ul>
<li>£–</li>
</ul>
<p>-</p>
<ul>
<li>£–</li>
</ul>
<p>£–</p></td>
</tr>
<tr class="even">
<td><p>Equity</p>
<ul>
<li>Share Capital, Premium, Drawings</li>
<li>Retained Earnings*</li>
</ul>
<p>Non-Current Liabilities</p>
<ul>
<li>Accounts go here</li>
</ul>
<p>Current Liabities</p>
<ul>
<li>Accounts go here</li>
</ul>
<p><strong>Total Equity + Assets</strong></p></td>
<td><p>-</p>
<ul>
<li>£–</li>
<li>£–</li>
</ul>
<p>-</p>
<ul>
<li>£–</li>
</ul>
<p>-</p>
<ul>
<li>£–</li>
</ul>
<p>£–</p></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Calculating Retained Earnings
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>For retained earnings, you calculate it as with this formula:</p>
<blockquote class="blockquote">
<p><strong>Closing balance of retained earnings from last period + net profit</strong></p>
</blockquote>
<p>You can also check the statement of changes in equity for this.</p>
</div>
</div>
</div>
<p>You should find that the accounting equation holds true. If it doesn’t, you have likely made some mistake. You should also check that the change in cash between the last period’s statement and this year’s statement matches the cash flow statement.</p>
<p><br></p>
</section>
<section id="statement-of-changes-in-equity" class="level3">
<h3 class="anchored" data-anchor-id="statement-of-changes-in-equity">Statement of Changes in Equity</h3>
<p>For companies, the balance sheet has assets, liabilities, and equity. Equity has several accounts that commonly appear:</p>
<ol type="1">
<li><strong>Retained Earnings</strong>: The accumulation of profits/losses that were not paid out as dividends or withdrawn from the business. Each year, this figure is updated based on the net profit/loss from the income statement.</li>
<li><strong>Share Capital</strong>: When a company is established, the initial money invested by the founder is known as the share capital.
<ul>
<li>For example, if you invest £100,000 into starting the business, your share capital is £100,000.</li>
<li>This capital can be divided into units of equal size, known as <strong>shares</strong>. For example, if £100,000 share capital is divided into 100,000 shares, then each share is £1.</li>
<li>This initial share price (ex. £1) is called the <strong>Par Value</strong> or <strong>Nominal Value</strong>, and will <u>never change</u>, no matter the market value of the share. This value is also noted by the value of an <strong>ordinary</strong> share.</li>
</ul></li>
<li><strong>Share Premium</strong>: When the market price of shares changes, the share premium reflects this change from the initial share capital.
<ul>
<li>Lets say the company needs £150,000, and found investors. They need to decide how many shares to issue, and at what price.</li>
<li>Shares cannot be issued below the par value.</li>
<li>Lets say the company decides to value each new share at £1.5, meaning they will issue 100,000 shares to get their funding needs.</li>
<li>Since the share price is £1.5 compared to the par of £1, it is issued at a <strong>share premium</strong> of £0.5. Share premium is the value in excess of the par value.</li>
<li>The remained of the £1 (par value) that is not the premium £0.5 is credited towards the share capital.</li>
</ul></li>
</ol>
<p>The statement of changes in Equity basically gives readers more information about how equity went from the starting balance to the ending balance.Since they issued 100,000 shares at a premium of £0.5, multiply together to get a share premium of £50,000.</p>
<p><br></p>
<p>The statement of changes in equity explains how the value of equity has changed during the year for a company.</p>
<ul>
<li>It lists the opening balance of each equity statement (retained earning, share capital, share premium).</li>
<li>Then it shows changes to this equity over the time period (usually a year). These changes can include dividends paid out, issuing more shares at a premium, and profit/loss.</li>
<li>The closing balance of the statement of changes in equity will equal the total equity in the end-of-period balance sheet.</li>
</ul>
<p><img src="images/paste-4.png" class="img-fluid"></p>
<p>Thus, the statement of changes in Equity basically gives readers more information about how equity went from the starting balance to the ending balance.</p>
<p><br></p>
</section>
<section id="cash-flow" class="level3">
<h3 class="anchored" data-anchor-id="cash-flow">Cash Flow</h3>
<p>Since the income statement (and net profit/loss) is recorded with accrual accounting, it does not record when cash is received/leaving a business. However, cash is still important as cash is needed to pay suppliers and liabilities.</p>
<p>The cash flow statement records how cash flows in and out of a business. It is divided into 3 parts:</p>
<ol type="1">
<li><strong>Cash flow from operating activities</strong>: this includes cash flows from core business operations, such as from sales, COGS, and operating expenses.</li>
<li><strong>Cash flow from investing activities</strong>: this includes cash flow from the purchase and disposal of assets.</li>
<li><strong>Cash flow from financing activities</strong>: this includes cash flows from liabilities/equity (loans, shares) and dividends.</li>
</ol>
<p>There are two ways to prepare a cash flow statement.</p>
<ul>
<li><strong>Direct method</strong>: this is basically recording and counting all the inflows and outflows of cash.</li>
<li><strong>Indirect method</strong> (more common): it uses different details from the income statement and balance sheet to work out the cash flow. Essentially, it is undoing the accruals/prepayments and payables/receivables to calculate cash flow.</li>
</ul>
<p><br></p>
<p><strong>Cash flow from operating activities</strong>:</p>
<ol type="1">
<li>Start with the <u>profit before tax</u> figure from the income statement.</li>
<li><em>Add</em> <u>finance costs</u> (so if you spend £X on finance costs, do + £X).</li>
<li><em>Subtract</em> <u>finance income</u> (so if you earn £X in finance income, do -£X).</li>
<li><em>Subtract</em> <u>profits from disposal of non-current assets</u> (so if you earn £X, do -£X, and if you lost £X, do +£X).</li>
<li><em>Add</em> <u>depreciation expense</u> (so if you spent £X on depreciation costs, do +£X).</li>
<li><em>Add</em> <u>amoritsation expense</u> (so if you spent £X on amoritsation, do +£X).</li>
<li><em>Subtract</em> <u>change in inventory</u> (so if inventory increased from last period, subtract. If inventory decreased from last period, add).</li>
<li><em>Subtract</em> <u>change in trade receivables</u> (so if receivables increased from last period, subtract. If receivables decreased from last period, add).</li>
<li><em>Add</em> <u>change in trade payables</u> (so if payables account increased from last period, add. If payables account decreased, subtract).</li>
<li><em>Add</em> <u>change in accruals</u> (so if accruals account increased from last period, add. If accruals account decreased, subtract).</li>
<li><em>Subtract</em> <u>tax expense</u> (so if you spent £X on tax, do -£X).</li>
<li><em>Subtract</em> <u>interest paid</u> (so if you spent £X on tax, do -£X).</li>
</ol>
<p><strong>Cash flow from investing activities</strong></p>
<ol type="1">
<li><em>Subtract</em> <u>amount spent on property, plant, and equipment</u> (so if you spent £X, do -£X).</li>
<li><em>Subtract</em> <u>amount spent on intangible assets</u> (so if you spent £X, do -£X).</li>
<li><em>Add</em> <u>proceeds from sale of property, plant, and equipment</u> (so if you gained £X, do +£X).</li>
</ol>
<p><strong>Cash flow from financing activities</strong></p>
<ol type="1">
<li><em>Add</em> <u>proceeds from issue of shares</u> (so if you gained £X, do +£X).</li>
<li><em>Add</em> <u>change in borrowings</u>.</li>
<li><em>Subtract</em> <u>dividends paid</u> (so if you paid £X, do -£X).</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>